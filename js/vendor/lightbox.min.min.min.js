/*!
 * Lightbox v2.9.0
 * by Lokesh Dhakar
 *
 * More info:
 * http://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright 2007, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 *
 * @preserve
 */
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"))}else{a.lightbox=b(a.jQuery)}}}(this,function(a){function b(c){this.album=[];this.currentImageIndex=void 0;this.init();this.options=a.extend({},this.constructor.defaults);this.option(c)}b.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:false,fadeDuration:600,fitImagesInViewport:true,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:true,wrapAround:false,disableScrolling:false,sanitizeTitle:false};b.prototype.option=function(c){a.extend(this.options,c)};b.prototype.imageCountLabel=function(d,c){return this.options.albumLabel.replace(/%1/g,d).replace(/%2/g,c)};b.prototype.init=function(){var c=this;a(document).ready(function(){c.enable();c.build()})};b.prototype.enable=function(){var c=this;a("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(d){c.start(a(d.currentTarget));return false})};b.prototype.build=function(){var c=this;a('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(a("body"));this.$lightbox=a("#lightbox");this.$overlay=a("#lightboxOverlay");this.$outerContainer=this.$lightbox.find(".lb-outerContainer");this.$container=this.$lightbox.find(".lb-container");this.$image=this.$lightbox.find(".lb-image");this.$nav=this.$lightbox.find(".lb-nav");this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)};this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)};this.$overlay.hide().on("click",function(){c.end();return false});this.$lightbox.hide().on("click",function(d){if(a(d.target).attr("id")==="lightbox"){c.end()}return false});this.$outerContainer.on("click",function(d){if(a(d.target).attr("id")==="lightbox"){c.end()}return false});this.$lightbox.find(".lb-prev").on("click",function(){if(c.currentImageIndex===0){c.changeImage(c.album.length-1)}else{c.changeImage(c.currentImageIndex-1)}return false});this.$lightbox.find(".lb-next").on("click",function(){if(c.currentImageIndex===c.album.length-1){c.changeImage(0)}else{c.changeImage(c.currentImageIndex+1)}return false});this.$nav.on("mousedown",function(d){if(d.which===3){c.$nav.css("pointer-events","none");c.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(c),0)})}});this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){c.end();return false})};b.prototype.start=function(c){var k=this;var l=a(window);l.on("resize",a.proxy(this.sizeOverlay,this));a("select, object, embed").css({visibility:"hidden"});this.sizeOverlay();this.album=[];var h=0;function f(i){k.album.push({link:i.attr("href"),title:i.attr("data-title")||i.attr("title")})}var e=c.attr("data-lightbox");var g;if(e){g=a(c.prop("tagName")+'[data-lightbox="'+e+'"]');for(var o=0;o<g.length;o=++o){f(a(g[o]));if(g[o]===c[0]){h=o}}}else{if(c.attr("rel")==="lightbox"){f(c)}else{g=a(c.prop("tagName")+'[rel="'+c.attr("rel")+'"]');for(var n=0;n<g.length;n=++n){f(a(g[n]));if(g[n]===c[0]){h=n}}}}var d=l.scrollTop()+this.options.positionFromTop;var m=l.scrollLeft();this.$lightbox.css({top:d+"px",left:m+"px"}).fadeIn(this.options.fadeDuration);if(this.options.disableScrolling){a("body").addClass("lb-disable-scrolling")}this.changeImage(h)};b.prototype.changeImage=function(d){var f=this;this.disableKeyboardNav();var c=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration);a(".lb-loader").fadeIn("slow");this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide();this.$outerContainer.addClass("animating");var e=new Image();e.onload=function(){var m;var i;var k;var j;var g;var h;var l;c.attr("src",f.album[d].link);m=a(e);c.width(e.width);c.height(e.height);if(f.options.fitImagesInViewport){l=a(window).width();h=a(window).height();g=l-f.containerPadding.left-f.containerPadding.right-f.imageBorderWidth.left-f.imageBorderWidth.right-20;j=h-f.containerPadding.top-f.containerPadding.bottom-f.imageBorderWidth.top-f.imageBorderWidth.bottom-120;if(f.options.maxWidth&&f.options.maxWidth<g){g=f.options.maxWidth}if(f.options.maxHeight&&f.options.maxHeight<g){j=f.options.maxHeight}if((e.width>g)||(e.height>j)){if((e.width/g)>(e.height/j)){k=g;i=parseInt(e.height/(e.width/k),10);c.width(k);c.height(i)}else{i=j;k=parseInt(e.width/(e.height/i),10);c.width(k);c.height(i)}}}f.sizeContainer(c.width(),c.height())};e.src=this.album[d].link;this.currentImageIndex=d};b.prototype.sizeOverlay=function(){this.$overlay.width(a(document).width()).height(a(document).height())};b.prototype.sizeContainer=function(f,h){var d=this;var j=this.$outerContainer.outerWidth();var e=this.$outerContainer.outerHeight();var c=f+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right;var i=h+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;function g(){d.$lightbox.find(".lb-dataContainer").width(c);d.$lightbox.find(".lb-prevLink").height(i);d.$lightbox.find(".lb-nextLink").height(i);d.showImage()}if(j!==c||e!==i){this.$outerContainer.animate({width:c,height:i},this.options.resizeDuration,"swing",function(){g()})}else{g()}};b.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(true).hide();this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration);this.updateNav();this.updateDetails();this.preloadNeighboringImages();this.enableKeyboardNav()};b.prototype.updateNav=function(){var c=false;try{document.createEvent("TouchEvent");c=(this.options.alwaysShowNavOnTouchDevices)?true:false}catch(d){}this.$lightbox.find(".lb-nav").show();if(this.album.length>1){if(this.options.wrapAround){if(c){this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1")}this.$lightbox.find(".lb-prev, .lb-next").show()}else{if(this.currentImageIndex>0){this.$lightbox.find(".lb-prev").show();if(c){this.$lightbox.find(".lb-prev").css("opacity","1")}}if(this.currentImageIndex<this.album.length-1){this.$lightbox.find(".lb-next").show();if(c){this.$lightbox.find(".lb-next").css("opacity","1")}}}}};b.prototype.updateDetails=function(){var e=this;if(typeof this.album[this.currentImageIndex].title!=="undefined"&&this.album[this.currentImageIndex].title!==""){var d=this.$lightbox.find(".lb-caption");if(this.options.sanitizeTitle){d.text(this.album[this.currentImageIndex].title)}else{d.html(this.album[this.currentImageIndex].title)}d.fadeIn("fast").find("a").on("click",function(f){if(a(this).attr("target")!==undefined){window.open(a(this).attr("href"),a(this).attr("target"))}else{location.href=a(this).attr("href")}})}if(this.album.length>1&&this.options.showImageNumberLabel){var c=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(c).fadeIn("fast")}else{this.$lightbox.find(".lb-number").hide()}this.$outerContainer.removeClass("animating");this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})};b.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var d=new Image();d.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var c=new Image();c.src=this.album[this.currentImageIndex-1].link}};b.prototype.enableKeyboardNav=function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))};b.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")};b.prototype.keyboardAction=function(h){var e=27;var c=37;var f=39;var d=h.keyCode;var g=String.fromCharCode(d).toLowerCase();if(d===e||g.match(/x|o|c/)){this.end()}else{if(g==="p"||d===c){if(this.currentImageIndex!==0){this.changeImage(this.currentImageIndex-1)}else{if(this.options.wrapAround&&this.album.length>1){this.changeImage(this.album.length-1)}}}else{if(g==="n"||d===f){if(this.currentImageIndex!==this.album.length-1){this.changeImage(this.currentImageIndex+1)}else{if(this.options.wrapAround&&this.album.length>1){this.changeImage(0)}}}}}};b.prototype.end=function(){this.disableKeyboardNav();a(window).off("resize",this.sizeOverlay);this.$lightbox.fadeOut(this.options.fadeDuration);this.$overlay.fadeOut(this.options.fadeDuration);a("select, object, embed").css({visibility:"visible"});if(this.options.disableScrolling){a("body").removeClass("lb-disable-scrolling")}};return new b()}));